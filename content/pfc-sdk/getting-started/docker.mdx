---
title: Docker Quickstart
description: Getting started with Perfectly Clear Docker container
---
import { Step, Steps } from 'fumadocs-ui/components/steps';


Perfectly Clear can be deployed as a self-hosted HTTP API using the Docker container. 
This provides the same functionality as the cloud Web API but runs entirely in your environment.


## Prerequisites

- Docker installed and running
- `pfc_container_image.tar` (provided by EyeQ)
- SDK license files (`sdk_license` folder)
- Optional: `curl` and `jq` for testing


## Quickstart

This section will guide you on hiow to get started using our Docker application. 

<Steps className='fd-steps [&_h3]:fd-step'>
    <Step>
        ### Load the Docker Image
        Run the command to load Docker Image:
        ```bash
        docker load --input pfc_container_image.tar
        ```
    </Step>
    <Step>
        ### Run the Container
        Run the Container as follows:
        ```bash
        docker run -d \
          -v "$(pwd)/presets":/presets \
          -v "$(pwd)/sdk_license":/sdk_license \
          -p 80:80 \
          --name pfc_container \
          pfc_container
        ```
    </Step>

    <Step>
        ### Test the API
        Check the API version with cURL: 
        ```bash
        # Check version
        curl http://localhost:80/version
        ```
    </Step>
</Steps>

## Volume Mapping

The container requires two mounted volumes:

| Volume | Container Path | Purpose |
|--------|---------------|---------|
| Presets | `/presets` | Custom preset files (optional) |
| License | `/sdk_license` | SDK license files (required) |

### Directory Structure
A sample directory setup for Docker:
```
my-pfc-setup/
├── presets/
│   ├── portrait.preset
│   ├── landscape.preset
│   └── product.preset
└── sdk_license/
    └── [license files from EyeQ]
```

### Run with full paths
Run Docker with full paths as shown below:
```bash
docker run -d \
  -v /opt/pfc/presets:/presets \
  -v /opt/pfc/sdk_license:/sdk_license \
  -p 8080:80 \
  --name pfc_container \
  pfc_container
```


## API reference
A quick API reference for image upload and correction.
### Upload Image

**PUT** `/pfc`

Upload an image to prepare it for correction.

```bash
imageKey=$(curl -X PUT \
  -H "Content-Type: image/jpeg" \
  --upload-file input.jpg \
  http://localhost:80/pfc | jq -r '.imageKey')

echo "Image key: $imageKey"
```

**Request:**
- Header: `Content-Type: image/jpeg` or `image/png`
- Body: Raw image data

**Response:**
```json
{
  "imageKey": "abc123..."
}
```


### Apply Correction

**GET** `/pfc/{imageKey}`

Correct the uploaded image and get a download URL.

```bash
correctedUrl=$(curl -X GET \
  "http://localhost:80/pfc/${imageKey}" | jq -r '.corrected_url')

echo "Corrected image URL: $correctedUrl"
```

**Parameters:**

| Parameter | Type | Description |
|-----------|------|-------------|
| `imageKey` | path | Required. ID from upload |
| `preset` | query | Preset name (default: Scene Detection) |
| `outputType` | query | `JPEG` or `PNG` |
| `outputQuality` | query | 40-100 (JPEG only, default: 90) |
| `width` | query | Output width in pixels |
| `height` | query | Output height in pixels |
| `long` | query | Long edge in pixels |
| `short` | query | Short edge in pixels |
| `scale` | query | Scale percentage |

**Response:**
```json
{
  "corrected_url": "http://localhost/output/abc123_corrected.jpg",
  "scene": 5
}
```

### Download corrected image

```bash
curl "${correctedUrl}" -o corrected.jpg
```

## Complete processing pipeline

Here's a full example script:

```bash
#!/bin/bash

INPUT_FILE="input.jpg"
OUTPUT_FILE="corrected.jpg"
API_URL="http://localhost:80"

# 1. Upload image
echo "Uploading image..."
imageKey=$(curl -s -X PUT \
  -H "Content-Type: image/jpeg" \
  --upload-file "$INPUT_FILE" \
  "${API_URL}/pfc" | jq -r '.imageKey')

if [ -z "$imageKey" ] || [ "$imageKey" = "null" ]; then
  echo "Upload failed"
  exit 1
fi
echo "Image key: $imageKey"

# 2. Apply correction (with Scene Detection)
echo "Applying correction..."
response=$(curl -s -X GET "${API_URL}/pfc/${imageKey}")
correctedUrl=$(echo "$response" | jq -r '.corrected_url')
scene=$(echo "$response" | jq -r '.scene')

if [ -z "$correctedUrl" ] || [ "$correctedUrl" = "null" ]; then
  echo "Correction failed"
  exit 1
fi
echo "Detected scene: $scene"

# 3. Download corrected image
echo "Downloading result..."
curl -s "$correctedUrl" -o "$OUTPUT_FILE"

echo "Saved to: $OUTPUT_FILE"
```